<!DOCTYPE html>
<html lang="en">
<head>
    <title>websocket</title>
    <meta charset="utf-8" />
</head>

<body>
    <button onclick="sendMessage()">测试</button>
        <script>
            let socket = new WebSocket("ws://localhost:8080/test/websocket");
            socket.onerror = err => {
                console.log(err);
            };
            socket.onopen = event => {
                console.log(event);
            };
            socket.onmessage = mess => {
                console.log(mess);
            };
            socket.onclose = () => {
                console.log("closed");
            };

            function sendMessage() {
                if (socket.readyState === 1) socket.send("test data");
                else alert("not yet");
            }
        </script>
    </body>
</html>
