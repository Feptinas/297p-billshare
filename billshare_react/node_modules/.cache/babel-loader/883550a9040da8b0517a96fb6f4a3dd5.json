{"ast":null,"code":"import Stomp from \"stompjs\";\nimport SockJS from \"sockjs-client\";\nimport jquery from \"jquery\";\nimport jQuery from \"jquery\";\nvar stompClient = null;\n\nfunction setConnected(connected) {\n  jQuery(\"#connect\").prop(\"disabled\", connected);\n  jQuery(\"#disconnect\").prop(\"disabled\", !connected);\n\n  if (connected) {\n    jQuery(\"#conversation\").show();\n  } else {\n    jQuery(\"#conversation\").hide();\n  }\n\n  jQuery(\"#greetings\").html(\"\");\n}\n\nfunction connect() {\n  var socket = new SockJS('http://localhost:8080/test');\n  stompClient = Stomp.over(socket); // stompClient.connect({}, function (frame) {\n  //     setConnected(true);\n  //     console.log('Connected: ' + frame);\n  //     stompClient.subscribe('/topic/greetings', function (greeting) {\n  //         showGreeting(JSON.parse(greeting.body).content);\n  //     });\n  // });\n}\n\nfunction disconnect() {\n  if (stompClient !== null) {\n    stompClient.disconnect();\n  }\n\n  setConnected(false);\n  console.log(\"Disconnected\");\n}\n\nfunction sendName() {\n  stompClient.send(\"/test/hello\", {}, JSON.stringify({\n    'name': jQuery(\"#name\").val()\n  }));\n}\n\nfunction showGreeting(message) {\n  jQuery(\"#greetings\").append(\"<tr><td>\" + message + \"</td></tr>\");\n}\n\njQuery(function () {\n  jQuery(\"form\").on('submit', function (e) {\n    e.preventDefault();\n  });\n  jQuery(\"#connect\").click(function () {\n    connect();\n  });\n  jQuery(\"#disconnect\").click(function () {\n    disconnect();\n  });\n  jQuery(\"#send\").click(function () {\n    sendName();\n  });\n});","map":{"version":3,"sources":["/Users/yuning/Documents/GitHub/BillShare/billshare_react/src/api/TestWebSocket/app.js"],"names":["Stomp","SockJS","jquery","jQuery","stompClient","setConnected","connected","prop","show","hide","html","connect","socket","over","disconnect","console","log","sendName","send","JSON","stringify","val","showGreeting","message","append","on","e","preventDefault","click"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,SAAlB;AACA,OAAOC,MAAP,MAAmB,eAAnB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AAGA,IAAIC,WAAW,GAAG,IAAlB;;AAEA,SAASC,YAAT,CAAsBC,SAAtB,EAAiC;AAC7BH,EAAAA,MAAM,CAAC,UAAD,CAAN,CAAmBI,IAAnB,CAAwB,UAAxB,EAAoCD,SAApC;AACAH,EAAAA,MAAM,CAAC,aAAD,CAAN,CAAsBI,IAAtB,CAA2B,UAA3B,EAAuC,CAACD,SAAxC;;AACA,MAAIA,SAAJ,EAAe;AACXH,IAAAA,MAAM,CAAC,eAAD,CAAN,CAAwBK,IAAxB;AACH,GAFD,MAGK;AACDL,IAAAA,MAAM,CAAC,eAAD,CAAN,CAAwBM,IAAxB;AACH;;AACDN,EAAAA,MAAM,CAAC,YAAD,CAAN,CAAqBO,IAArB,CAA0B,EAA1B;AACH;;AAED,SAASC,OAAT,GAAmB;AACf,MAAIC,MAAM,GAAG,IAAIX,MAAJ,CAAW,4BAAX,CAAb;AACAG,EAAAA,WAAW,GAAGJ,KAAK,CAACa,IAAN,CAAWD,MAAX,CAAd,CAFe,CAGf;AACA;AACA;AACA;AACA;AACA;AACA;AACH;;AAED,SAASE,UAAT,GAAsB;AAClB,MAAIV,WAAW,KAAK,IAApB,EAA0B;AACtBA,IAAAA,WAAW,CAACU,UAAZ;AACH;;AACDT,EAAAA,YAAY,CAAC,KAAD,CAAZ;AACAU,EAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACH;;AAED,SAASC,QAAT,GAAoB;AAChBb,EAAAA,WAAW,CAACc,IAAZ,CAAiB,aAAjB,EAAgC,EAAhC,EAAoCC,IAAI,CAACC,SAAL,CAAe;AAAC,YAAQjB,MAAM,CAAC,OAAD,CAAN,CAAgBkB,GAAhB;AAAT,GAAf,CAApC;AACH;;AAED,SAASC,YAAT,CAAsBC,OAAtB,EAA+B;AAC3BpB,EAAAA,MAAM,CAAC,YAAD,CAAN,CAAqBqB,MAArB,CAA4B,aAAaD,OAAb,GAAuB,YAAnD;AACH;;AAEDpB,MAAM,CAAC,YAAY;AACfA,EAAAA,MAAM,CAAC,MAAD,CAAN,CAAesB,EAAf,CAAkB,QAAlB,EAA4B,UAAUC,CAAV,EAAa;AACrCA,IAAAA,CAAC,CAACC,cAAF;AACH,GAFD;AAGAxB,EAAAA,MAAM,CAAE,UAAF,CAAN,CAAqByB,KAArB,CAA2B,YAAW;AAAEjB,IAAAA,OAAO;AAAK,GAApD;AACAR,EAAAA,MAAM,CAAE,aAAF,CAAN,CAAwByB,KAAxB,CAA8B,YAAW;AAAEd,IAAAA,UAAU;AAAK,GAA1D;AACAX,EAAAA,MAAM,CAAE,OAAF,CAAN,CAAkByB,KAAlB,CAAwB,YAAW;AAAEX,IAAAA,QAAQ;AAAK,GAAlD;AACH,CAPK,CAAN","sourcesContent":["import Stomp from \"stompjs\";\nimport SockJS from \"sockjs-client\";\nimport jquery from \"jquery\";\nimport jQuery from \"jquery\";\n\n\nvar stompClient = null;\n\nfunction setConnected(connected) {\n    jQuery(\"#connect\").prop(\"disabled\", connected);\n    jQuery(\"#disconnect\").prop(\"disabled\", !connected);\n    if (connected) {\n        jQuery(\"#conversation\").show();\n    }\n    else {\n        jQuery(\"#conversation\").hide();\n    }\n    jQuery(\"#greetings\").html(\"\");\n}\n\nfunction connect() {\n    var socket = new SockJS('http://localhost:8080/test');\n    stompClient = Stomp.over(socket);\n    // stompClient.connect({}, function (frame) {\n    //     setConnected(true);\n    //     console.log('Connected: ' + frame);\n    //     stompClient.subscribe('/topic/greetings', function (greeting) {\n    //         showGreeting(JSON.parse(greeting.body).content);\n    //     });\n    // });\n}\n\nfunction disconnect() {\n    if (stompClient !== null) {\n        stompClient.disconnect();\n    }\n    setConnected(false);\n    console.log(\"Disconnected\");\n}\n\nfunction sendName() {\n    stompClient.send(\"/test/hello\", {}, JSON.stringify({'name': jQuery(\"#name\").val()}));\n}\n\nfunction showGreeting(message) {\n    jQuery(\"#greetings\").append(\"<tr><td>\" + message + \"</td></tr>\");\n}\n\njQuery(function () {\n    jQuery(\"form\").on('submit', function (e) {\n        e.preventDefault();\n    });\n    jQuery( \"#connect\" ).click(function() { connect(); });\n    jQuery( \"#disconnect\" ).click(function() { disconnect(); });\n    jQuery( \"#send\" ).click(function() { sendName(); });\n});"]},"metadata":{},"sourceType":"module"}